<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="libs.js"></script>
<script>
    const client = supabase.createClient(
        'https://jbhnzmrqeuuydclrliag.supabase.co',
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpiaG56bXJxZXV1eWRjbHJsaWFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzMzM1MDUsImV4cCI6MjA4MDkwOTUwNX0.2Kx5M2idUHpmqPo3jXisDcFxar2F3YoySay0apSy_TE'
    );

    async function writeFile(name, content) {
        const { data, error } = await client
            .storage
            .from('db')
            .upload(name, content, {
            upsert: true, // allows overwriting
            });

        if (error) {
            console.error(error);
        } else {
            console.log('File written!');
        }
    }

    async function readFile(name) {
        const { data, error } = await client
            .storage
            .from('db')
            .download(name);

        if (error) {
            console.error(error);
            return null;
        }

        const text = await data.text();
        return text;
    }
</script>